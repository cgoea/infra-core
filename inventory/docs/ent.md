<!---
  SPDX-FileCopyrightText: (C) 2025 Intel Corporation
  SPDX-License-Identifier: Apache-2.0
-->

# Object-Relation Mapping (ORM) with Ent

The database schema and the ORM code supporting the schema is autogenerated with [ent](https://entgo.io/). You must
install the `protoc-gen-ent` tool for the generation to work. `ent` works based on protobuf options set on fields,
which is described in these [document][document-url].

Generating database schema is done in two phases - `buf` uses `protoc-gen-ent` to
generate schema files in `internal/ent/schema`, then `ent` transforms those schemas
into database code with `go generate`.

After making changes to the [proto files](../api/), run:

- `make generate`

This will create updated protobuf code and ent database code together with the Python\* bindings. Check the code in the
following folders:

- [internal/ent/schema](../internal/ent/schema/)
- [pkg/api](../pkg/api)
- [python/infra_inventory](../python/infra_inventory/)

[document-url]: https://github.com/ent/contrib/blob/master/entproto/cmd/protoc-gen-ent/README.md
