---
# SPDX-FileCopyrightText: (C) 2025 Intel Corporation
# SPDX-License-Identifier: Apache-2.0

WorkloadKind:
  description: "Type of workload."
  type: string
  format: enum
  enum:
    - WORKLOAD_KIND_UNSPECIFIED
    - WORKLOAD_KIND_CLUSTER

WorkloadMemberKind:
  description: "Type of workload member."
  type: string
  format: enum
  enum:
    - WORKLOAD_MEMBER_KIND_UNSPECIFIED
    - WORKLOAD_MEMBER_KIND_CLUSTER_NODE

WorkloadMember:
  description: "A member of a workload."
  required:
    - resourceId
    - workloadMemberId
    - workloadId
    - kind
    - instanceId
  properties:
    resourceId:
      type: string
      pattern: "^workloadmember-[0-9a-f]{8}$"
      description: "resource ID, generated by the inventory on Create"
      readOnly: true
    workloadMemberId:
      readOnly: true
      description: "The workload member's unique identifier. Alias of resourceId."
      title: "workloadMemberId"
      type: string
      pattern: "^workloadmember-[0-9a-f]{8}$"
    workloadId:
      description: "The unique identifier of the workload."
      title: "workloadId"
      type: string
      pattern: "^workload-[0-9a-f]{8}$"
      writeOnly: true
    workload:
      description: The workload resource associated with the workload member.
      $ref: "#/Workload"
      readOnly: true
    kind:
      $ref: "#/WorkloadMemberKind"
    instanceId:
      description: "The unique identifier of the instance."
      title: "instanceId"
      type: string
      pattern: "^inst-[0-9a-f]{8}$"
      writeOnly: true
    instance:
      description: The instance resource associated with the workload member.
      $ref: "./_index.yaml#/Instance"
      readOnly: true
    member:
      readOnly: true
      "$ref": "instance.yaml#/Instance"
    timestamps:
      "$ref": "./common.yaml#/Timestamps"
      readOnly: true

Workload:
  description: "A generic way to group compute resources to obtain a workload."
  required:
    - kind
    - members
  properties:
    resourceId:
      type: string
      pattern: "^workload-[0-9a-f]{8}$"
      description: "resource ID, generated by the inventory on Create"
      readOnly: true
    workloadId:
      readOnly: true
      description: "The workload's unique identifier. Alias of resourceId."
      title: "workloadId"
      type: string
      pattern: "^workload-[0-9a-f]{8}$"
    name:
      description: "Human-readable name for the workload."
      type: string
      maxLength: 50
      pattern: '^$|^[a-zA-Z-_0-9./: ]+$'
    kind:
      $ref: "#/WorkloadKind"
    status:
      description: "Human-readable status of the workload."
      type: string
      maxLength: 500
      pattern: '^$|^[a-zA-Z-_0-9./:;=?@!#,<>*() ]+$'
    members:
      type: array
      items:
        "$ref": "#/WorkloadMember"
      minItems: 0
      readOnly: true
    externalId:
      description: "The ID of the external resource,
        used to link to resources outside the realm of Edge Infrastructure Manager."
      type: string
      pattern: "^$|^[a-zA-Z-_0-9./: ]+$"
      maxLength: 40
    timestamps:
      "$ref": "./common.yaml#/Timestamps"
      readOnly: true

WorkloadList:
  description: "A list of workload objects."
  required:
    - Workloads
    - hasNext
    - totalElements
  properties:
    Workloads:
      type: array
      items:
        "$ref": "#/Workload"
      minItems: 0
      readOnly: true
    hasNext:
      description: "Indicates if there are more workload
        objects available to be retrieved."
      type: boolean
      readOnly: true
    totalElements:
      description: "Total number of items the request would return, if not limited by pagination."
      type: integer
      readOnly: true
  title: WorkloadList
  type: object

WorkloadMemberList:
  description: "A list of workload member objects."
  required:
    - WorkloadMembers
    - hasNext
    - totalElements
  properties:
    WorkloadMembers:
      type: array
      items:
        "$ref": "#/WorkloadMember"
      minItems: 0
      readOnly: true
    hasNext:
      description: "Indicates if there are more workload members
        objects available to be retrieved."
      type: boolean
      readOnly: true
    totalElements:
      description: "Total number of items the request would return, if not limited by pagination."
      type: integer
      readOnly: true
  title: WorkloadMemberList
  type: object
