---
# SPDX-FileCopyrightText: (C) 2025 Intel Corporation
# SPDX-License-Identifier: Apache-2.0

InstanceKind:
  description: "Type of the instance."
  type: string
  format: enum
  enum:
    - INSTANCE_KIND_UNSPECIFIED
    - INSTANCE_KIND_METAL

InstanceState:
  description: "State of the instance."
  type: string
  format: enum
  enum:
    - INSTANCE_STATE_UNSPECIFIED
    - INSTANCE_STATE_RUNNING
    - INSTANCE_STATE_UNTRUSTED
    - INSTANCE_STATE_DELETED

Instance:
  description: "An instance resource."
  properties:
    resourceId:
      type: string
      pattern: "^inst-[0-9a-f]{8}$"
      description: Resource ID, generated by the inventory on Create.
      readOnly: true
    instanceID:
      readOnly: true
      description: "The instance's unique identifier. Alias of resourceID."
      title: "instance_id"
      type: string
      pattern: "^inst-[0-9a-f]{8}$"
    name:
      description: "The instance's human-readable name."
      type: string
      maxLength: 50
      pattern: "^$|^[a-zA-Z-_0-9./: ]+$"
    kind:
      $ref: "#/InstanceKind"
    hostID:
      description: "The host's unique identifier associated with the instance."
      type: string
      pattern: "^host-[0-9a-f]{8}$"
      writeOnly: true
    host:
      description: "The host's resource associated with the instance."
      $ref: "./_index.yaml#/Host"
      readOnly: true
    osID:
      deprecated: true  # Deprecating to rename it to desiredOsID in 25.02
      description: "The unique identifier of OS resource that must be installed on the instance."
      title: osResourceID
      type: string
      pattern: "^os-[0-9a-f]{8}$"
      writeOnly: true
    os:
      deprecated: true  # Deprecating to rename it to desiredOs in 25.02
      description: "The OS resource that must be installed on the instance.
        Deprecated. Use desiredOs to filter os."
      $ref: "./_index.yaml#/OperatingSystemResource"
      readOnly: true
    desiredOs:
      description: "The OS resource that must be installed on the instance."
      $ref: "./_index.yaml#/OperatingSystemResource"
      readOnly: true
    currentOs:
      description: "The OS resource that is currently installed on the instance."
      $ref: "./_index.yaml#/OperatingSystemResource"
      readOnly: true
    currentState:
      $ref: "#/InstanceState"
      readOnly: true
    desiredState:
      $ref: "#/InstanceState"
      readOnly: true
    securityFeature:
      description: "Select to enable security features such as Secure Boot (SB)
        and Full Disk Encryption (FDE). Immutable after creation."
      "$ref": "./common.yaml#/SecurityFeature"
    instanceStatus:
      description: "The instance's lifecycle status message."
      type: string
      readOnly: true
      maxLength: 1024
      pattern: "^$|^[a-zA-Z-_0-9./:;=?@!#,<>*() ]+$"
    instanceStatusIndicator:
      description: "The instance's lifecycle status indicator."
      readOnly: true
      $ref: "./_index.yaml#/StatusIndicator"
    instanceStatusTimestamp:
      description: "A Unix, UTC timestamp when the instance's lifecycle status was last updated."
      readOnly: true
      type: integer
      format: uint64
    provisioningStatus:
      description: "The instance's provisioning status message."
      type: string
      readOnly: true
      maxLength: 1024
      pattern: "^$|^[a-zA-Z-_0-9./:;=?@!#,<>*() ]+$"
    provisioningStatusIndicator:
      description: "The instance's provisioning status indicator."
      readOnly: true
      $ref: "./_index.yaml#/StatusIndicator"
    provisioningStatusTimestamp:
      description: "A Unix, UTC timestamp when the instance's provisioning status was last
        updated."
      readOnly: true
      type: integer
      format: uint64
    updateStatus:
      description: "The instance's software update status message."
      type: string
      readOnly: true
      maxLength: 1024
      pattern: "^$|^[a-zA-Z-_0-9./:;=?@!#,<>*() ]+$"
    updateStatusIndicator:
      description: "The instance's software update status indicator."
      readOnly: true
      $ref: "./_index.yaml#/StatusIndicator"
    updateStatusTimestamp:
      description: "A Unix, UTC timestamp when the instance's software update status was last
        updated."
      readOnly: true
      type: integer
      format: uint64
    updateStatusDetail:
      description: 'Beta: The detailed description of the instance''s last software update.'
      readOnly: true
      type: string
      maxLength: 100000
    trustedAttestationStatus:
      description: "The instance's software trusted attestation status message."
      type: string
      readOnly: true
      maxLength: 1024
      pattern: "^$|^[a-zA-Z-_0-9./:;=?@!#,<>*() ]+$"
    trustedAttestationStatusIndicator:
      description: "The instance's software trusted attestation status indicator."
      readOnly: true
      $ref: "./_index.yaml#/StatusIndicator"
    trustedAttestationStatusTimestamp:
      description: "A Unix, UTC timestamp when the instance's software trusted attestation
        status was last updated."
      readOnly: true
      type: integer
      format: uint64
    workloadMembers:
      description: "The workload members associated with the instance."
      type: array
      items:
        "$ref": "_index.yaml#/WorkloadMember"
      minItems: 0
      readOnly: true
    localAccountID:
      description: "The unique identifier of local account will be associated with the instance."
      title: localAccountResourceID
      type: string
      pattern: "^localaccount-[0-9a-f]{8}$"
      writeOnly: true
    localAccount:
      description: "The local account resource associated with the instance."
      title: localAccountResource
      $ref: "./_index.yaml#/LocalAccount"
      readOnly: true
    timestamps:
      "$ref": "./common.yaml#/Timestamps"
      readOnly: true
    instanceStatusDetail:
      description: The detailed status of the instance's software components.
      type: string
      readOnly: true
      maxLength: 1024
      pattern: "^$|^[a-zA-Z-_0-9./:;=?@!#,<>*() ]+$"
InstanceList:
  description: "A list of instance objects."
  required:
    - instances
    - hasNext
    - totalElements
  properties:
    instances:
      type: array
      items:
        "$ref": "#/Instance"
      minItems: 0
      readOnly: true
    hasNext:
      description: "Indicates if there are more instance objects available to be retrieved."
      type: boolean
      readOnly: true
    totalElements:
      description: "Total number of items the request would return, if not limited by pagination."
      type: integer
      readOnly: true
  title: InstanceList
  type: object
